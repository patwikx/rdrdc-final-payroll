flowchart TD
  A[Employee Submits Request<br/>Leave or Overtime]
  B[Validate Input, Company Scope, and Access]
  C{Request Type}

  D[Leave Request<br/>Reserve Leave Credits on Submit]
  E[Overtime Request<br/>Validate Minimum Duration and Eligibility]

  F[Set Request Status to Pending Supervisor Approval]
  G[Supervisor Reviews Request]
  H{Supervisor Decision}
  I[Supervisor Rejects<br/>Status Rejected and Notify Employee]
  J[Supervisor Approves<br/>Status Supervisor Approved]

  K[Route to HR Final Approval Queue]
  L[HR Reviews with Required Remarks]
  M{HR Decision}

  N[HR Rejects<br/>Status Rejected]
  O[HR Approves<br/>Status Approved]

  P{Approved Request Type}
  Q[Leave Finalization<br/>Consume Reserved Credits and Update Leave Ledger]
  R[Overtime Finalization<br/>Apply OT Pay or Convert to CTO Credits]

  S[If Rejected Leave<br/>Release Reserved Leave Credits]
  T[Write Audit Log and Notify Employee]
  U[End]

  A --> B --> C
  C -- Leave --> D --> F
  C -- Overtime --> E --> F

  F --> G --> H
  H -- Reject --> I --> S --> T --> U
  H -- Approve --> J --> K --> L --> M

  M -- Reject --> N --> S --> T --> U
  M -- Approve --> O --> P
  P -- Leave --> Q --> T --> U
  P -- Overtime --> R --> T --> U

  classDef default fill:#ffffff,stroke:#000000,color:#000000;
