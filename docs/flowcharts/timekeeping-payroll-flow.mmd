flowchart TD
  A[Collect and Finalize Attendance Inputs<br/>Biometric Data and Manual Corrections]
  B[Check Timekeeping Readiness<br/>Attendance, Leaves, Overtime, and Required Inputs]
  C{Timekeeping Ready?}
  D[Resolve Missing or Incorrect Records<br/>Then Recheck]
  E[Create Payroll Run for Selected Period and Employee Scope]
  F[Run Pre-Calculation Validation]
  G{Validation Passed?}
  H[Fix Validation Findings<br/>Then Validate Again]
  I[Proceed to Payroll Calculation]
  J[System Calculates Payroll Values]
  K{Calculation Successful?}
  L[Review Calculation Issue<br/>Return to Validation or Recalculation]
  M[HR Reviews Payroll Register and Employee Results]
  N{Adjustments Needed?}
  O[Apply Approved Adjustments<br/>Then Recalculate]
  P[Generate Payslips]
  Q[Release or Send Payslips to Employees]
  R[Close Payroll Run]
  S{Regular Payroll Period?}
  T[Lock Pay Period]
  U[Keep Pay Period Open]
  V{Need to Reopen for Corrections?}
  W[Reopen Payroll Run and Return to Review]
  X[Generate Statutory Reports and Exports<br/>SSS, PhilHealth, Pag-IBIG, DOLE, BIR]
  Y[End Payroll Cycle]

  A --> B --> C
  C -- No --> D --> B
  C -- Yes --> E --> F --> G
  G -- No --> H --> F
  G -- Yes --> I --> J --> K
  K -- No --> L --> I
  K -- Yes --> M --> N
  N -- Yes --> O --> J
  N -- No --> P --> Q --> R --> S
  S -- Yes --> T --> V
  S -- No --> U --> V
  V -- Yes --> W --> M
  V -- No --> X --> Y

  classDef default fill:#ffffff,stroke:#000000,color:#000000;
